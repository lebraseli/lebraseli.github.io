<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>The Archive</title>
  <meta name="description" content="One artifact holds the key." />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__mark" aria-hidden="true">⛵</div>
      <div class="brand__text">
        <div class="brand__title">The Archive</div>
        <div class="brand__subtitle">One artifact holds the key.</div>
      </div>
    </div>

    <div class="topbar__actions">
      <button id="toggleHintsBtn" class="btn btn--ghost" type="button" aria-pressed="false">
        Hints
      </button>
      <button id="toggleContrastBtn" class="btn btn--ghost" type="button" aria-pressed="false">
        High Contrast
      </button>
    </div>
  </header>

  <main class="container">
    <section class="intro card">
      <h1>Mission Brief</h1>
      <p class="muted">
        Your objective is to extract an alphanumeric code from a single piece of evidence.
        Submit the code to unlock the next instruction.
      </p>

      <div class="rulebox" role="note" aria-label="Rules">
        <div class="rulebox__row">
          <span class="pill">Scope</span>
          <span>Only <strong>one</strong> evidence item is in play.</span>
        </div>
        <div class="rulebox__row">
          <span class="pill">Input</span>
          <span>Code is <strong>alphanumeric</strong>. No spaces.</span>
        </div>
        <div class="rulebox__row">
          <span class="pill">Feedback</span>
          <span>Validation reports <strong>how many characters are wrong</strong>.</span>
        </div>
      </div>
    </section>

    <section class="evidence">
      <div class="sectionHeader">
        <h2>Evidence</h2>
        <span class="muted">Open, zoom, and extract the hidden sequence.</span>
      </div>

      <div id="evidenceCardHost" class="grid grid--single"></div>

      <div id="hintPanel" class="hintPanel card is-hidden" aria-live="polite">
        <h3>Hints (Optional)</h3>
        <ul class="hintList">
          <li>Assume the code is present, but intentionally low-salience.</li>
          <li>Use zoom and distance strategically.</li>
          <li>Confirm character order before submitting.</li>
          <li>Do not overfit to decorative elements—stay systematic.</li>
        </ul>
      </div>
    </section>

    <section class="submission card">
      <h2>Submit Code</h2>

      <form id="codeForm" novalidate>
        <div class="formRow">
          <label for="codeInput" class="label">Code</label>
          <input
            id="codeInput"
            name="code"
            type="text"
            inputmode="latin"
            autocomplete="off"
            autocapitalize="characters"
            spellcheck="false"
            placeholder="Enter the extracted alphanumeric code"
            aria-describedby="codeHelp"
            required
          />
          <div id="codeHelp" class="help muted">
            Case-insensitive. Spaces and punctuation are ignored.
          </div>
        </div>

        <div class="formActions">
          <button class="btn btn--primary" type="submit">Validate</button>
          <button id="resetBtn" class="btn btn--ghost" type="button">Reset</button>
        </div>
      </form>

      <div id="result" class="result" role="status" aria-live="assertive"></div>

      <div class="divider"></div>

      <details class="faq">
        <summary>How feedback works</summary>
        <div class="faq__body">
          <p class="muted">
            The validator compares your entry to the correct code character-by-character.
            You’ll see how many positions differ (plus any length difference) so you can iterate
            without the page disclosing the answer.
          </p>
        </div>
      </details>
    </section>

    <footer class="footer muted">
      <span>Static site. No tracking. No external calls.</span>
    </footer>
  </main>

  <dialog id="evidenceModal" class="modal">
    <div class="modal__header">
      <div class="modal__titleWrap">
        <div id="modalTitle" class="modal__title">Evidence</div>
        <div id="modalMeta" class="modal__meta muted"></div>
      </div>
      <button id="closeModalBtn" class="btn btn--ghost" type="button" aria-label="Close">
        ✕
      </button>
    </div>

    <div class="modal__body">
      <figure class="modal__figure">
        <img id="modalImg" alt="" />
        <figcaption id="modalCaption" class="muted"></figcaption>
      </figure>

      <div class="modal__controls">
        <button id="zoomOutBtn" class="btn btn--ghost" type="button">−</button>
        <input id="zoomRange" type="range" min="50" max="350" value="100" />
        <button id="zoomInBtn" class="btn btn--ghost" type="button">+</button>
        <span id="zoomLabel" class="muted">100%</span>

        <span class="spacer"></span>

        <button id="copyEvidenceIdBtn" class="btn btn--ghost" type="button">Copy ID</button>
      </div>
    </div>
  </dialog>

  <script src="./app.js"></script>
</body>
</html>
