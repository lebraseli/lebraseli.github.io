<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark" />
  <title>Your Next Clue</title>
  <meta name="description" content="Two locks. One decrypt. The poem stays encrypted until you earn it." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;650;750&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <div class="noise" aria-hidden="true"></div>
  <div class="bg" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" id="app">
      <header class="topbar">
        <div class="brand">
          <div class="brandTitle">Your Next Clue</div>
          <div class="brandSub">Two locks. One decrypt. No freebies.</div>
        </div>

        <nav class="steps" aria-label="progress">
          <div class="step active" id="step1"><span class="dot"></span>Canopy</div>
          <div class="step" id="step2"><span class="dot"></span>Stairwell</div>
          <div class="step" id="step3"><span class="dot"></span>Quiet Room</div>
        </nav>
      </header>

      <div class="layout">
        <section class="panel">
          <div class="panelHead">
            <div>
              <h1 class="panelTitle" id="panelTitle">Lock 1 — The Canopy</h1>
              <p class="panelDesc" id="panelDesc">
                Not everything that moves is useful. Trust what stays still. Read the canopy from high to low.
              </p>
            </div>

            <div class="statusPill" id="poemStatus">Poem: encrypted</div>
          </div>

          <div class="panelBody">
            <!-- STAGE 1 -->
            <section class="stage show" id="stage1" aria-label="Lock 1">
              <div class="scene canopy" id="canopyScene" role="application" aria-label="Canopy scene">
                <div class="sceneHint">
                  Constraint set: <b>still</b> only. Ordering: <b>high → low</b>.
                  <span class="muted">If you think you saw a letter, you didn’t.</span>
                </div>
                <div class="sceneHUD">
                  <div class="hudChip">Signal: <span id="l1Signal">0</span>/<span id="l1Target">0</span></div>
                  <div class="hudChip">Strikes: <span id="l1Strikes">0</span></div>
                </div>
                <div class="scatter" id="canopy"></div>
              </div>

              <div class="resultRow">
                <div class="resultBox">
                  <div class="resultLabel">Outcome</div>
                  <div class="resultValue" id="l1Outcome">No fragment acquired.</div>
                </div>
                <div class="btnRow">
                  <button class="btn ghost" id="l1Reset">Reset</button>
                </div>
              </div>

              <div class="msg" id="l1Msg" aria-live="polite"></div>
            </section>

            <!-- STAGE 2 -->
            <section class="stage" id="stage2" aria-label="Lock 2">
              <div class="scene stairwell" id="stairsScene" role="application" aria-label="Stairwell scene">
                <div class="sceneHint">
                  In a <b>new kind of height</b>, the path is obvious. Don’t measure it like a mountain.
                </div>
                <div class="sceneHUD">
                  <div class="hudChip">Steps: <span id="l2Steps">0</span>/<span id="l2Target">0</span></div>
                  <div class="hudChip">Strikes: <span id="l2Strikes">0</span></div>
                </div>
                <div class="stairs" id="stairs"></div>
              </div>

              <div class="resultRow">
                <div class="resultBox">
                  <div class="resultLabel">Outcome</div>
                  <div class="resultValue" id="l2Outcome">No fragment acquired.</div>
                </div>
                <div class="btnRow">
                  <button class="btn ghost" id="l2Reset">Reset</button>
                </div>
              </div>

              <div class="msg" id="l2Msg" aria-live="polite"></div>
            </section>

            <!-- STAGE 3 -->
            <section class="stage" id="stage3" aria-label="Quiet Room">
              <div class="quiet">
                <div class="quietTop">
                  <div>
                    <div class="quietTitle">Quiet Room</div>
                    <div class="quietSub">
                      Provide the passphrase derived from your fragments. The poem will decrypt locally in your browser.
                    </div>
                  </div>
                  <div class="statusPill" id="unlockStatus">Locked</div>
                </div>

                <div class="fieldRow">
                  <input id="pass" type="text" autocomplete="off" spellcheck="false"
                    placeholder="passphrase (lowercase, no spaces)" />
                  <button class="btn primary" id="open">Decrypt</button>
                  <button class="btn ghost" id="qReset">Reset</button>
                </div>

                <div class="msg" id="qMsg" aria-live="polite"></div>

                <div class="poemWrap" id="poemWrap" hidden>
                  <div class="poemHead">
                    <div class="poemTitle">Decrypted Poem</div>
                    <div class="btnRow">
                      <button class="btn ghost" id="copyPoem">Copy</button>
                    </div>
                  </div>
                  <pre class="poem" id="poem"></pre>
                </div>
              </div>
            </section>

          </div>
        </section>

        <aside class="side">
          <div class="sideCard">
            <div class="sideLabel">Current objective</div>
            <div class="sideValue" id="objective">Extract Fragment A</div>
            <div class="divider"></div>
            <div class="sideText">
              This experience is calibrated for competent solvers. It’s intentionally adversarial, but fair.
              The “wow” comes from realizing you were measuring the wrong thing.
            </div>
          </div>

          <div class="sideCard">
            <div class="sideLabel">Fragments acquired</div>
            <div class="fragLine"><span class="fragKey">Fragment A</span><span class="fragVal" id="fragA">—</span></div>
            <div class="fragLine"><span class="fragKey">Fragment B</span><span class="fragVal" id="fragB">—</span></div>
            <div class="divider"></div>
            <div class="sideFoot">
              <span class="muted">No hints. No training wheels.</span>
              <button class="btn danger" id="hardReset">Hard reset</button>
            </div>
          </div>

          <div class="sideCard">
            <div class="sideLabel">Design note</div>
            <div class="sideText">
              Lock 1 tests <b>signal vs motion</b>. Lock 2 tests <b>stacking vs altitude</b>.
              The poem stays encrypted until both fragments are earned.
            </div>
          </div>
        </aside>
      </div>

      <footer class="footer">
        <span>Operational posture: frustration is expected. The system is deterministic.</span>
        <span class="muted">If Lock 2 feels “impossible,” you’re using the wrong definition of height.</span>
      </footer>
    </section>
  </main>

  <script src="./game.js"></script>
</body>
</html>
