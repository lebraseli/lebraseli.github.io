<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="dark light" />
  <title>First Clue</title>

  <!-- IMPORTANT: this file is in /firstclue, so this relative path is correct -->
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <main class="wrap">
    <section class="card" aria-label="Clue card">
      <div class="topbar">
        <div class="brand">Clue</div>
        <button id="hintBtn" class="btn" type="button">Hint</button>
      </div>

      <pre class="clue" id="clueText">Disguised in plain sight, the answers bide their time
Known truths arrive wrapped softly in rhyme
Hushed beginnings matter more than tone
Kept slightly off, but not overthrown
Distance hides in places you won’t see
All lines bend but never truly break
Quiet shifts are easier to make
Zones return to where they last aligned
Residue reveals what’s left behind</pre>
    </section>
  </main>

  <!-- Slide-in hint panel -->
  <aside class="hint-panel" id="hintPanel" aria-label="Hint panel">
    <div class="hint-head">
      <div class="hint-title">Hint</div>
      <button class="btn icon-btn" id="hintClose" type="button" aria-label="Close">✕</button>
    </div>

    <label class="hint-label" for="hintCode">Enter code</label>
    <div class="hint-row">
      <input id="hintCode" type="password" inputmode="numeric" autocomplete="off" />
      <button class="btn btn-primary" id="hintSubmit" type="button">Unlock</button>
    </div>

    <div class="hint-msg" id="hintMsg" aria-live="polite"></div>
  </aside>

  <script>
    const hintBtn = document.getElementById('hintBtn');
    const panel = document.getElementById('hintPanel');
    const closeBtn = document.getElementById('hintClose');
    const submitBtn = document.getElementById('hintSubmit');
    const codeInput = document.getElementById('hintCode');
    const msg = document.getElementById('hintMsg');

    const CODE = "1324";
    const HINT_TEXT = "Don’t look at the text; look instead at the first column.";

    function openPanel() {
      panel.classList.add('open');
      msg.textContent = "";
      msg.className = "hint-msg";
      codeInput.value = "";
      setTimeout(() => codeInput.focus(), 60);
    }

    function closePanel() {
      panel.classList.remove('open');
      msg.textContent = "";
      msg.className = "hint-msg";
      codeInput.value = "";
    }

    function unlock() {
      const entered = (codeInput.value || "").trim();
      if (entered === CODE) {
        msg.textContent = HINT_TEXT;
        msg.className = "hint-msg ok";
      } else {
        msg.textContent = "Incorrect code.";
        msg.className = "hint-msg bad";
        codeInput.value = "";
        codeInput.focus();
      }
    }

    hintBtn.addEventListener('click', () => {
      if (panel.classList.contains('open')) closePanel();
      else openPanel();
    });

    closeBtn.addEventListener('click', closePanel);
    submitBtn.addEventListener('click', unlock);

    codeInput.addEventListener('keydown', (e) => {
      if (e.key === "Enter") unlock();
      if (e.key === "Escape") closePanel();
    });

    // Click outside closes
    document.addEventListener('click', (e) => {
      if (!panel.classList.contains('open')) return;
      const clickedInside = panel.contains(e.target) || hintBtn.contains(e.target);
      if (!clickedInside) closePanel();
    });
  </script>
</body>
</html>
